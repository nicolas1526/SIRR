"use strict";var ARN;(function(n){var t,i,r,u;(function(t){function u(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i]);for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}function f(n){var t=function(n,t){for(var i=n.toString();i.length<(t||2);)i="0"+i;return i};return t(n.getDate(),2)+"/"+t(n.getMonth()+1,2)+"/"+n.getFullYear()}function e(n){return n.replace(/^\s+|\s+$/g,"")}function o(n){return typeof n!="undefined"&&typeof n.getFormContext=="function"?n.getFormContext():Xrm.Page}function s(){return typeof Xrm.Utility!="undefined"&&typeof Xrm.Utility.getGlobalContext=="function"?Xrm.Utility.getGlobalContext():Xrm.Page.context}function h(n){var i=t.getFormContext(n),r=t.getGlobalContext();return i.data&&i.data.attributes?i.data.attributes:r.getQueryStringParameters()}function c(){var n=t.getGlobalContext();return typeof n.userSettings!="undefined"?n.userSettings.userId:n.getUserId()}function l(){var n=t.getGlobalContext();return typeof n.userSettings!="undefined"?n.userSettings.userName:n.getUserName()}function i(){var n=t.getGlobalContext();return typeof n.userSettings!="undefined"?n.userSettings.securityRoles:n.getUserRoles()}function a(n,t){return Xrm.Navigation&&typeof Xrm.Navigation.openForm!="undefined"?Xrm.Navigation.openForm(n,t):(Xrm.Utility.openEntityForm(n.entityName,n.entityId,t,{openInNewWindow:n.openInNewWindow}),$.Deferred().resolve(null))}function v(n,t,i){Xrm.Navigation&&typeof Xrm.Navigation.openWebResource!="undefined"?Xrm.Navigation.openWebResource(n,t,i):t?Xrm.Utility.openWebResource(n,i,t.width,t.height):Xrm.Utility.openWebResource(n,i)}function y(n,t){var i=$.Deferred();return Xrm.Navigation&&typeof Xrm.Navigation.openAlertDialog=="function"?Xrm.Navigation.openAlertDialog(n,t).then(i.resolve,i.reject):Xrm.Utility.alertDialog(n.text,i.resolve),i.promise()}function p(n,t){var i=$.Deferred();return Xrm.Navigation&&typeof Xrm.Navigation.openConfirmDialog=="function"?Xrm.Navigation.openConfirmDialog(n,t).then(function(n){return i.resolve(n.confirmed)},i.reject):Xrm.Utility.confirmDialog(n.text,function(){return i.resolve(!0)},function(){return i.resolve(!1)}),i.promise()}function w(){var r=this.getGlobalContext(),u=r.getClientUrl(),n=document.createElement("a"),t,i;return n.href=u,t=n.hostname,i={barber:"http://villoresi/reportserver",cheever:"http://villoresi/reportserver",alain:"http://hamks/reportserver",nima:"http://hamks/reportserver",plank:"http://bellatrix/reportserver",hill:"http://veith/reportserver",irwin:"http://hamks/reportserver","sirrdev.reincorporacion.gov.co":"https://sirrdevrep.reincorporacion.gov.co/reportserver"}[t],i}function b(n,t,i){return $.Deferred().resolve().promise().then(function(){var r;try{t()}catch(o){var u=n.getContext().getClientUrl(),f=function(n){for(var t="",i=0;i<n;i++)t+=Math.floor(Math.random()*9).toString();return t},e=function(n){return $.ajax({cache:!0,dataType:"script",url:u+n+"?ver="+f(9)})},r=$.Deferred().resolve().promise();return i&&i.length>0&&(r=$.Deferred().resolve().promise(),i.forEach(function(n){r=r.then(function(){return e(n)})})),r=r.then(function(){return t()})}})}function k(n){n.getAttribute().setValue(null);n.clearNotification();n.getAttribute().setRequiredLevel("none");n.setDisabled(!0);n.setVisible(!1)}function d(n,t,i,r){var u=n.getAttribute().getRequiredLevel(),f=n.getDisabled(),e=n.getVisible();typeof t!="boolean"&&(t=!1);typeof i!="boolean"&&(i=!1);u!=="required"||t?u!=="required"&&t&&n.getAttribute().setRequiredLevel("required"):n.getAttribute().setRequiredLevel("recommended");(f&&!i||!f&&i)&&n.setDisabled(i);e||n.setVisible(!0);typeof r!="undefined"&&r!==null&&n.getAttribute().setValue(r)}function g(n){var i=n.getAttribute().getValue();return typeof i!="undefined"&&i!==null&&typeof i.length=="number"&&i.length>0&&typeof i[0].id!="undefined"&&t.trimString(i[0].id)!==""?i[0].id.replace(/[{}]/g,""):null}function nt(n,t,i,r){var u=[{id:"{"+i+"}",name:r,entityType:t}];n.getAttribute().setValue(u)}function tt(n,t){var r=n.getOptions(),i=r.filter(function(n){return n.value===t}),u=n.getAttribute().getRequiredLevel();i!==null&&i.length>0?n.getAttribute().setValue(t):(n.getAttribute().setRequiredLevel("none"),n.getAttribute().setValue(null),n.getAttribute().setRequiredLevel(u))}function it(n){var t=this;typeof Xrm!="undefined"&&typeof Xrm.Utility!="undefined"&&typeof Xrm.Utility.showProgressIndicator=="function"&&Xrm.Utility.showProgressIndicator(n)}function rt(){Xrm&&Xrm.Utility&&Xrm.Utility.closeProgressIndicator&&Xrm.Utility.closeProgressIndicator()}function ut(n,t,i){var u=this,r=t.getName();i&&(r+="_"+i);t.clearNotification(r);n.ui.clearFormNotification(r)}function ft(t,i,r,u,f,e){n.Common.clearFieldNotification(t,i,e);var o=i.getName();e&&(o+="_"+e);t.ui.setFormNotification(r,u,o);u==="ERROR"?i.setNotification(r,o):i.addNotification&&i.addNotification({messages:[r],notificationLevel:"RECOMMENDATION",uniqueId:o,actions:f})}function et(){var r=t.getGlobalContext(),n=r.getVersion(),i;return n||(n=Xrm.Page.context.getVersion()),n?(i=n.split("."),n=i[0]+"."+i[1]):n="8.1",n}function r(){var n=t.getGlobalContext(),i=n.getClientUrl(),r=t.getApiVersion();return i+"/api/data/v"+r}function ot(n){return $.ajax(n)}function st(n){for(var o,s,u=i(),f=$.Deferred(),h=r(),e="name eq '"+encodeURIComponent(n)+"' and (",t=0;t<u.length;t++)e+=t===0?"roleid eq "+u[t]:" or roleid eq "+u[t];return e+=")",o="name",s=h+"/roles?$filter="+e+"&$select="+o,this.ajaxRequest({url:s,dataType:"json"}).then(function(n){return f.resolve(n.value.length>0)}).catch(function(n){return f.reject(n)}),f.promise()}t.extend=u;t.dateFormat=f;t.trimString=e;t.getFormContext=o;t.getGlobalContext=s;t.getQueryStringParameters=h;t.getUserId=c;t.getUserName=l;t.getUserRoles=i;t.openEntityForm=a;t.openWebResource=v;t.openAlertDialog=y;t.openConfirmDialog=p;t.getReportServerUrl=w;t.tryRunApp=b;t.hide=k;t.show=d;t.getLookupValue=g;t.setLookupValue=nt;t.setPickListValue=tt;t.showProgressIndicator=it;t.closeProgressIndicator=rt;t.clearFieldNotification=ut;t.setFieldNotification=ft;t.getApiVersion=et;t.getApiUrl=r;t.ajaxRequest=ot;t.userHasRole=st})(t=n.Common||(n.Common={}));i=function(){function i(){this._globalContext=t.getGlobalContext();this._siteUrl=this.globalContext.getClientUrl();this._apiVersion=t.getApiVersion();this._apiURL=t.getApiUrl()}return Object.defineProperty(i.prototype,"globalContext",{get:function(){return this._globalContext},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"siteUrl",{get:function(){return this._siteUrl},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"apiVersion",{get:function(){return this._apiVersion},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"apiURL",{get:function(){return this._apiURL},enumerable:!1,configurable:!0}),i.prototype.ajaxRequest=function(t){return n.Common.ajaxRequest(t)},i.prototype.fetchXMLRequest=function(n,t){var i=this.apiURL+"/"+n+"?fetchXml="+encodeURIComponent(t);return this.ajaxRequest({url:i,dataType:"json"})},i.prototype.odataRequest=function(n,t){var i=this.apiURL+"/"+n;return t&&typeof t!="undefined"&&(i+="?$select="+encodeURIComponent(t.select),t.filter&&t.filter!==null&&(i+="&$filter="+encodeURIComponent(t.filter)),t.expand&&t.expand!==null&&(i+="&$expand="+encodeURIComponent(t.expand)),t.orderby&&t.orderby!==null&&(i+="&$expand="+encodeURIComponent(t.orderby)),t.skip&&t.skip!==null&&(i+="&$skip="+encodeURIComponent(t.skip.toString())),t.top&&t.top!==null&&(i+="&$top="+encodeURIComponent(t.top.toString()))),this.ajaxRequest({url:i,dataType:"json"})},i.prototype.userHasRole=function(t){return n.Common.userHasRole(t)},i}();n.DalBase=i;r=function(){function n(n){this._globalContext=t.getGlobalContext();this._formContext=t.getFormContext(n);this._progressIndicatorDefaultMessage="Por favor espere. Esto podría tomar algún tiempo."}return Object.defineProperty(n.prototype,"executionContext",{get:function(){return this._executionContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"globalContext",{get:function(){return this._globalContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formContext",{get:function(){return this._formContext},enumerable:!1,configurable:!0}),n.prototype.hide=function(n){t.hide(n)},n.prototype.show=function(n,i,r,u){t.show(n,i,r,u)},n.prototype.getLookupValue=function(n){return t.getLookupValue(n)},n.prototype.setLookupValue=function(n,i,r,u){t.setLookupValue(n,i,r,u)},n.prototype.setPickListValue=function(n,i){t.setPickListValue(n,i)},n.prototype.showProgressIndicator=function(n){var i=this;(typeof n=="undefined"||n===null)&&(n=i._progressIndicatorDefaultMessage);t.showProgressIndicator(n)},n.prototype.closeProgressIndicator=function(){t.closeProgressIndicator()},n.prototype.clearFieldNotification=function(n,i){t.clearFieldNotification(this.formContext,n,i)},n.prototype.setFieldNotification=function(n,i,r,u,f){t.setFieldNotification(this.formContext,n,i,r,u,f)},n}();n.AppBase=r,function(t){function u(t){var i=$.Deferred(),r=n.Common.getApiUrl();return n.Common.ajaxRequest({url:r+"/EntityDefinitions",data:{$filter:"LogicalName eq '"+t+"'",$select:"EntitySetName"},dataType:"json"}).then(function(n){return i.resolve(n)}).catch(function(n){return i.reject(n)}),i.promise()}function i(n,t){for(var o,r,f,u=0,e=Object.keys(n);u<e.length;u++){if(o=e[u],r=n[o],o===t)return r;if(typeof r=="object"&&r!==null){if(f=i(r,t),typeof f!="undefined"&&f!==null)return f}else continue}return null}function r(n,t,r){var u=i(t,r);if((typeof u=="undefined"||u===null)&&(u=i(t,"_"+r+"_value")),u!==null&&typeof u!="undefined")switch(n){case"date":return new Date(u);case"number":case"string":case"boolean":case"object":return u}return null}function e(n,t,i,u){var f=[i,"x002e",u].join("_");return r(n,t,f)}function f(n,t){var i=t+"@OData.Community.Display.V1.FormattedValue";return r("string",n,i)}function o(n,t,i){var r=[t,"x002e",i].join("_");return f(n,r)}function s(t,i,r){var f=$.Deferred(),e=n.Common.getApiUrl();return i=i.replace(/[{}]/g,""),u(t).then(function(u){if(u.value.length>0){var o=u.value[0].EntitySetName;n.Common.ajaxRequest({url:e+"/"+o+"("+i+")",data:r,headers:{Prefer:'odata.include-annotations="OData.Community.Display.V1.FormattedValue"'},dataType:"json"}).then(function(n){return f.resolve(n)}).catch(function(n){return f.reject(n)})}else f.reject(new Error("Not found an entity with LogicalName = '"+t+"'."))}).catch(function(n){return f.reject(n)}),f.promise()}function h(t,i){var r=$.Deferred(),f=n.Common.getApiUrl();return u(t).then(function(u){if(u.value.length>0){var e=u.value[0].EntitySetName;n.Common.ajaxRequest({url:f+"/"+e,data:i,headers:{Prefer:'odata.include-annotations="OData.Community.Display.V1.FormattedValue"'},dataType:"json"}).then(function(n){return r.resolve(n)}).catch(function(n){return r.reject(n)})}else r.reject(new Error("Not found an entity with LogicalName = '"+t+"'."))}).catch(function(n){return r.reject(n)}),r.promise()}t.getAttributeValue=r;t.getAliasedValue=e;t.getAttributeFormattedValue=f;t.getAliasedFormattedValue=o;t.retrieve=s;t.retrieveMultiple=h}(u=n.WebApi||(n.WebApi={}))})(ARN||(ARN={}));